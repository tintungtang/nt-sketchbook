@use 'variables' as variables;
@use 'utilities/utilities' as utils;

/* Base layer wires tokens (CSS vars) and global element defaults */
@layer base {
    /* 1) Token â†’ CSS variable for the primary sans stack */
    :root {
        --nt-font-sans: var(--nt-font-default), ui-sans-serif, system-ui, sans-serif;
        --nt-font-mono-default: var(--nt-font-mono-default), 'ui-monospace, SFMono-Regular, monospace';
    }

    /* 2) Global defaults */
    body {
        font-family: var(--nt-font-sans);
        font-size: var(--nt-font-size-base, 0.875rem);
        line-height: var(--nt-line-height-base, 1.5);
        font-weight: var(--nt-font-weight-regular, 400);
        color: var(--nt-text-color, #28292b);
        background: var(--nt-color-bg, #FFF);
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
    }

    /* 3) A convenience class that matches body font */
    .nt-font { font-family: var(--nt-font-sans), serif; }

    /* 4) Headings (use tokens; no margins here) */
    h1 { font-size: var(--nt-font-size-4xl, 2.25rem); font-weight: var(--nt-font-weight-bold, 700); line-height: var(--nt-line-height-tight, 1.25); }
    h2 { font-size: var(--nt-font-size-3xl, 1.875rem); font-weight: var(--nt-font-weight-bold, 700); line-height: var(--nt-line-height-tight, 1.25); }
    h3 { font-size: var(--nt-font-size-2xl, 1.5rem); font-weight: var(--nt-font-weight-semibold, 600); }
    h4 { font-size: var(--nt-font-size-xl, 1.25rem);  font-weight: var(--nt-font-weight-semibold, 600); }
    h5 { font-size: var(--nt-font-size-lg, 1.125rem); font-weight: var(--nt-font-weight-medium, 500); }
    h6 { font-size: var(--nt-font-size-base, 1rem);   font-weight: var(--nt-font-weight-medium, 500); }

    /* 5) Inline text */
    small { font-size: 0.875em; }
    strong { font-weight: var(--nt-font-weight-bold, 700); }
    code, pre {
        font-family: var(--nt-font-mono-default);
        background-color: var(--nt-color-surface, #f6f6f7);
        border-radius: var(--nt-radius-sm, 4px);
        padding: 0.125rem 0.25rem;
    }

    /* 6) Links use semantic color tokens */
    a { color: var(--nt-color-link); text-decoration: none; }
    a:hover, a:focus { text-decoration: underline; }

    /* 7) Accessible focus ring */
    :focus-visible {
        outline: 2px solid var(--nt-color-focus, oklch(72% 0.2 210));
        outline-offset: 2px;
    }
}

/* 8) Atomic typography utilities belong to the utilities layer.
   If your generator mixins already emit @layer utilities, great.
   If not, you can wrap them here or move to utilities/index.scss.
*/
@layer utilities {
    @include utils.generate-font-size-utilities;
    @include utils.generate-line-height-utilities;
}
